# README by Rohan Maddamsetti (rmaddams _AT_ ODU _DOT_ edu)
# Last edited on 10/11/2019.

# How to run the analyses for the manuscript 'Genomic and phenotypic evolution of
# Escherichia coli in a citrate-only resource environment.  

## Generating the Last Common Ancestor.  
First, we need to generate the Last Common Ancestor (LCA) for the strains studied in this project.
The LCA is generated by taking the intersection of mutations in CZB152 and CZB154. I took the curated
genome diff (*.gd) files for CZB152 and CZB154 that Jeff has made available on github at:
https://github.com/barricklab/LTEE-Ecoli. These curated files are actually missing a SNP
that is found in every single one of the genomes analyzed for this project. Therefore, I added this mutation
(in clpA-serW-mut.gd) to the LCA. In addition to generating the LCA, I also generate a genome diff of the LTEE 50K
Cit+ clone REL11364 that has all mutations in CZB154 subtracted out. CZB154 is a direct ancestor of the 50K clone,
so this file contains all future genome evolution on this line of descent.  

To do this work, run the shell script generate-LCA.sh like so:
'bash generate-LCA.sh'.  

## Calling mutations with breseq.
Second, we need to run Jeff Barrick's breseq pipeline (github.com/barricklab/breseq) to call mutations in the genomes,
using the LCA of all strains as a reference genome.

To do this work, I wrote a shell script to run breseq on all Illumina data for the genomes on the local high-performance
computing cluster (HPC).

Run this script like so, on your computer cluster. You have to have breseq installed, and you will have to update the pathnames
as appropriate. Note that we use slurm as the job scheduler. Feel free to contact me if you have trouble with this step.

'bash submit-slurm-job.sh'

Then, download the breseq results from the cluster for further analysis.



prep-growth-data.py
deal-with-gdiffs.py
dice-analysis.py
copy-number-analysis.py
grep-maeA-citT-polymorphism.py
make-figures.R

